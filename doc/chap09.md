# 9장 페이징 기능을 활성화하여 64비트 전환을 준비하자
## 9.1 선형 주소와 4단계 페이징 기법
1단계 - 페이지 맵 레벨 4 테이블(PML4)
2단계 - 페이지 디렉터리 포인터 테이블
3단계 - 페이지 디렉터리
4단계 - 2MB 페이지
선형 주소를 실제 물리 주소로 변환하려면 CR3 레지스터에 설정된 PML4 테이블의 기준 주소로부터 
PML4 엔트리 -> 페이지 디렉터리 포인터 엔트리 -> 디렉터리 엔트리 순으로 진행하여 2MB 페이지의 기준 주소를 찾은 다음 
기준 주소에 선형 주소에 선형 주소의 하위 21비트 오프셋을 더하면 구할 수 있다.
4단계 페이징 기법을 사용하려면 페이지 맵 레벨 4 테이블, 페이지 디렉터리 포인터 테이블, 페이지 디렉터리 등 세 가지 자료구조를 생성해야 한다.

MINT 64 OS에서 필요한 페이지의 역할
* 선형 주소와 물리 주소를 1:1로 맵핑하여 직관적인 어드레스 변환을 수행해야 함
* 2MB 페이지를 사용하여 최대 64GB의 물리 메모리를 매핑해야함
* 물리 메모리 전체 영역에 대해 캐시를 활성화하여 수행 속도를 향상 시켜야 함
* 위에서 언급한 기능 외에 다른 기능은 사용하지 않음

## 9.2 페이지 테이블 구성과 공간 할당
페이징 기능을 사용하려면 메모리 영역의 정보를 담고 있는 페이지 테이블을 생성하여 프로세서에 설정해야한다.

### 9.2.1 64GB의 물리 메모리 관리를 위한 메모리 계산
1개의 PML4 테이블 + 1개의 페이지 디렉터리 포인터 테이블 + 64개의 페이지 디렉터리

### 9.2.2 페이지 테이블을 위한 공간 할당
1MB(0x100000)~2MB(0x200000) 영역을 IA-32e 모드용 커널 자료구조 영역으로 사용한다.

### 9.2.3 공통 속성 필드 설정
#### PCD 필드와 PWT 필드
#### U/S 필드와 R/W 필드
#### EXB 필드, A필드, P필드, Avail 필드

### 9.2.4 페이지 디렉터리 엔트리용 속성 필드 설정
#### PAT 필드, G 필드, D 필드

## 9.3 페이지 테이블 생성과 페이징 기능 활성화
### 9.3.1 페이지 엔트리를 위한 자료구조 정의와 매크로 정의
### 9.3.2 페이지 엔트리 생성과 페이지 테이블 생성
### 9.3.3 프로세서의 페이징 기능 활성화
프로세스의 페이징 기능을 활성화하는 방법은 CR0 레지스터의 PG비트와 CR3 레지스터, CR4 레지스터의 PAE 비트만 1로 설정하는 것이다.

## 9.4 보호 모드 커널에 페이지 테이블 생성 기능 추가
### 9.4.1 페이징 기능 관련 파일 생성
